<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Asesmen Siswa Sederhana</title>
    <!-- Memuat Tailwind CSS untuk styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e0f2fe; /* Latar belakang biru muda */
        }
        .container-card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        input[type="text"] {
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 0.75rem;
            text-align: center;
            transition: all 0.2s;
            font-size: 1.125rem;
            font-weight: 600;
        }
        input[type="text"]:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
        }
        .custom-alert {
            z-index: 100;
        }
        /* Style untuk tombol */
        .lihat-nilai-btn {
            background-color: #22c55e; /* green-500 */
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.2s;
            cursor: pointer;
        }
        .lihat-nilai-btn:hover {
            background-color: #16a34a; /* green-600 */
        }
        .lihat-nilai-btn:disabled {
            background-color: #9ca3af; /* gray-400 */
            cursor: not-allowed;
        }
        
        /* Style untuk tabel */
        .grade-table-container {
            overflow-x: auto;
        }
        .grade-table {
            width: 100%;
            border-collapse: collapse;
        }
        .grade-table th, .grade-table td {
            border: 1px solid #e5e7eb;
            padding: 0.5rem;
            text-align: center;
        }
        .grade-table th {
            background-color: #f3f4f6;
            font-weight: bold;
            font-size: 0.75rem;
            text-transform: uppercase;
        }
        .grade-table td {
            font-size: 0.875rem;
        }
        .grade-table .description-row td {
            font-size: 0.7rem;
            line-height: 1rem;
            vertical-align: top;
        }
    </style>
</head>
<body class="p-4 md:p-8 flex items-center justify-center min-h-screen">

    <!-- Konten Utama Aplikasi -->
    <div class="container-card w-full max-w-2xl p-6 md:p-8 text-center transition-all duration-300">
        <!-- Form Pencarian -->
        <div id="search-form">
            <h1 class="text-2xl font-bold text-gray-800 mb-6">Akses Nilai Siswa</h1>
            <input type="text" id="nisnInput" placeholder="NISN" class="block w-full mb-4">
            <input type="text" id="nameDisplay" placeholder="Nama Siswa" class="block w-full mb-6 bg-gray-100 cursor-default" readonly>
            <button id="lihatNilaiBtn" class="lihat-nilai-btn w-full">
                Lihat Nilai
            </button>
        </div>
        
        <!-- Tampilan Nilai Siswa (Awalnya Tersembunyi) -->
        <div id="grades-view" class="hidden mt-6">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-xl md:text-2xl font-bold text-gray-800 flex-grow text-left">Hasil Asesmen Siswa</h1>
                <button id="homeBtn" class="bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-600 transition-colors duration-200">
                    Home
                </button>
            </div>
            <div id="student-info" class="text-left mb-4">
                <span id="studentNameCode" class="font-semibold text-gray-700 text-lg"></span>
            </div>
            
            <div id="gradeTableContainer" class="grade-table-container">
                <!-- Tabel nilai akan dimasukkan di sini oleh JavaScript -->
            </div>
            
            <button id="backBtn" class="bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-600 transition-colors duration-200 mt-6 w-full">
                Kembali
            </button>
        </div>
        
        <!-- Modal Pemberitahuan Kustom -->
        <div id="customAlert" class="custom-alert fixed bottom-4 right-4 bg-gray-800 text-white py-3 px-6 rounded-lg shadow-lg opacity-0 transition-opacity duration-300 hidden">
            <span>Pesan</span>
        </div>
    </div>

    <script>
        // Data Model: Data Siswa dan Nilai
        // Data ini telah diperbarui dari file CSV lengkap yang Anda berikan.
        const students = [
            { nis: '1120', name: 'ABDUL QODIR MUHAMMAD' },
            { nis: '1100', name: 'AFRINA MALIKA QUINN' },
            { nis: '1126', name: 'AIDAN RASHAAD SAQEEL WIRAWAN' },
            { nis: '1069', name: 'AISYAH AYUDIA INARA PUTRI' },
            { nis: '1128', name: 'AKIRA AZKA YUSUF' },
            { nis: '1085', name: 'ALANNAH NAOMI SAHILA' },
            { nis: '1127', name: 'ALBIAN ARSYAD WIBOWO' },
            { nis: '1097', name: 'ALISYA FARA DEBYA' },
            { nis: '1105', name: 'ANASTASYA ZULFA PUTRI ANINGTYAS' },
            { nis: '1067', name: 'ANNAQIYAH ASKARU DZAHABIAH' },
            { nis: '1093', name: 'ARETA SHAKIRA' },
            { nis: '1099', name: 'AZKIA SABRINA AZHAR' },
            { nis: '1063', name: 'BENEDICT ARKA FACHRI' },
            { nis: '1116', name: 'CALISSA AQILLA KAMILA' },
            { nis: '1133', name: 'CANTIKA ANGGITA SALSABILA' },
            { nis: '1095', name: 'FAHRI ALFIAN' },
            { nis: '1070', name: 'FAIZAH AZZAHRA PUTRI' },
            { nis: '1098', name: 'FARAH ADIBA AZ-ZAHRA' },
            { nis: '1065', name: 'FATIMAH AZ-ZAHRA' },
            { nis: '1117', name: 'FATIN NAYLA HURIYA' },
            { nis: '1121', name: 'GHAISAN ALTHAF RIADY' },
            { nis: '1109', name: 'GHAISAN ALTHAF RIADY' },
            { nis: '1112', name: 'HAJAR ASWAD' },
            { nis: '1086', name: 'HANUM MAUDY ALKAFF' },
            { nis: '1108', name: 'IRFAN DZIKRI PRATAMA' },
            { nis: '1076', name: 'KEISHA ALYA WAHYUDI' },
            { nis: '1090', name: 'KHAYRA AZZAHRA' },
            { nis: '1118', name: 'KHAIRUNNISA NAJLA' },
            { nis: '1107', name: 'KHALIFAH JASMINE SHIDQI' },
            { nis: '1113', name: 'KHALIL ANIES PUTRA' },
            { nis: '1096', name: 'KHANZA ADISTI ALMAIRA' },
            { nis: '1075', name: 'KRISNA ARYA PRADIPTA' },
            { nis: '1115', name: 'LAILA NAJWA SAUSAN' },
            { nis: '1079', name: 'MARITZA ZAHIRA ARTHARIAN' },
            { nis: '1088', name: 'MUHAMMAD ALDY ARSYAD' },
            { nis: '1071', name: 'MUHAMMAD ALFARIZI' },
            { nis: '1122', name: 'MUHAMMAD ALTHAF AZZAHWAN' },
            { nis: '1077', name: 'MUHAMMAD ARKAN' },
            { nis: '1102', name: 'MUHAMMAD AZKA' },
            { nis: '1119', name: 'MUHAMMAD FAIZ ZAKARIA' },
            { nis: '1110', name: 'MUHAMMAD FATHIR FAHRIZAL' },
            { nis: '1066', name: 'MUHAMMAD FAHREZI PUTRA PAMUNGKAS' },
            { nis: '1081', name: 'MUHAMMAD FIKRI SYAH PUTRA' },
            { nis: '1068', name: 'MUHAMMAD HAFIDZ AFIFI' },
            { nis: '1091', name: 'MUHAMMAD HAMDAN NURSYAHBANI' },
            { nis: '1073', name: 'MUHAMMAD NAUFAL' },
            { nis: '1083', name: 'MUHAMMAD RAFIQI' },
            { nis: '1103', name: 'MUHAMMAD RAFISYAH ALMUBARAK' },
            { nis: '1072', name: 'MUHAMMAD RAFI KHALIS' },
            { nis: '1114', name: 'MUHAMMAD RASYID' },
            { nis: '1094', name: 'MUHAMMAD ZULFIKAR AZKA PRATAMA' },
            { nis: '1089', name: 'NADHIRA E GA PUTRI FARDANA' },
            { nis: '1080', name: 'NAILAH SALSABILA AZZAHRA' },
            { nis: '1111', name: 'NAJWA AURELIA PUTRI' },
            { nis: '1101', name: 'NAYLA HANIYYA' },
            { nis: '1082', name: 'NEZHA AQILLA' },
            { nis: '1078', name: 'NUR MUHAMMAD ALAMSYAH' },
            { nis: '1123', name: 'OKY PRABOWO' },
            { nis: '1062', name: 'RAIHAN GADING SATRIA' },
            { nis: '1106', name: 'MUHAMMAD ZHAFRAN MAULANA' },
            { nis: '1087', name: 'NADHIRA EGA PUTRI FARDANA' },
            { nis: '1084', name: 'NABILA PUTRI ADIYANTO' },
            { nis: '1092', name: 'MUHAMMAD AHZA DANISH FAHREZA' },
            { nis: '1124', name: 'KIRANA HANANIA ZULFARIYANTO' },
            { nis: '1104', name: 'MUHAMMAD AZHAR AFANDI' },
            { nis: '1125', name: 'MUHAMMAD KEEFANO AL-FATIH PRATAMA' },
            { nis: '1074', name: 'MUHAMMAD RIFQI FAHREZI' },
            { nis: '1064', name: 'MUHAMMAD SAIF' },
            { nis: '1130', name: 'SYAKIRA ADISTY' },
            { nis: '1060', name: 'KIANDRA ZEVANNA ARSY' }
        ];

        // Data nilai formatif dan sumatif berdasarkan NIS
        const grades = {
            '1120': { formatif: [95, 100, 100, 100], sumatif: [100] },
            '1100': { formatif: [100, 75, 100, 75], sumatif: [98] },
            '1126': { formatif: [100, 95, 100, 100], sumatif: [100] },
            '1069': { formatif: [90, 80, 85, 80], sumatif: [94] },
            '1128': { formatif: [95, 100, 90, 80], sumatif: [98] },
            '1085': { formatif: [90, 95, 90, 80], sumatif: [98] },
            '1127': { formatif: [80, 85, 90, 75], sumatif: [88] },
            '1097': { formatif: [100, 90, 100, 95], sumatif: [98] },
            '1105': { formatif: [80, 85, 95, 90], sumatif: [88] },
            '1067': { formatif: [100, 100, 100, 95], sumatif: [100] },
            '1093': { formatif: [90, 90, 85, 85], sumatif: [96] },
            '1099': { formatif: [85, 80, 85, 75], sumatif: [88] },
            '1063': { formatif: [95, 95, 90, 85], sumatif: [98] },
            '1116': { formatif: [100, 95, 100, 95], sumatif: [100] },
            '1133': { formatif: [95, 80, 90, 80], sumatif: [96] },
            '1095': { formatif: [85, 80, 90, 80], sumatif: [94] },
            '1070': { formatif: [90, 85, 100, 85], sumatif: [96] },
            '1098': { formatif: [95, 90, 100, 90], sumatif: [98] },
            '1065': { formatif: [95, 80, 90, 80], sumatif: [96] },
            '1117': { formatif: [100, 90, 95, 85], sumatif: [98] },
            '1121': { formatif: [90, 85, 90, 80], sumatif: [96] },
            '1109': { formatif: [85, 80, 85, 80], sumatif: [94] },
            '1112': { formatif: [90, 95, 100, 90], sumatif: [98] },
            '1086': { formatif: [95, 90, 95, 80], sumatif: [98] },
            '1108': { formatif: [90, 95, 90, 85], sumatif: [96] },
            '1076': { formatif: [95, 90, 95, 80], sumatif: [98] },
            '1090': { formatif: [100, 95, 100, 100], sumatif: [100] },
            '1118': { formatif: [90, 95, 90, 85], sumatif: [96] },
            '1107': { formatif: [100, 100, 100, 100], sumatif: [100] },
            '1113': { formatif: [90, 85, 95, 80], sumatif: [96] },
            '1096': { formatif: [95, 90, 100, 90], sumatif: [98] },
            '1075': { formatif: [85, 80, 85, 80], sumatif: [94] },
            '1115': { formatif: [95, 95, 100, 95], sumatif: [100] },
            '1079': { formatif: [100, 90, 100, 90], sumatif: [98] },
            '1088': { formatif: [90, 85, 90, 85], sumatif: [96] },
            '1071': { formatif: [95, 90, 90, 85], sumatif: [98] },
            '1122': { formatif: [100, 95, 100, 95], sumatif: [100] },
            '1077': { formatif: [95, 90, 95, 85], sumatif: [98] },
            '1102': { formatif: [100, 90, 100, 90], sumatif: [98] },
            '1119': { formatif: [95, 95, 100, 90], sumatif: [100] },
            '1110': { formatif: [90, 85, 90, 85], sumatif: [96] },
            '1066': { formatif: [85, 80, 95, 85], sumatif: [94] },
            '1081': { formatif: [90, 95, 90, 80], sumatif: [96] },
            '1068': { formatif: [95, 80, 90, 80], sumatif: [96] },
            '1091': { formatif: [100, 90, 100, 100], sumatif: [100] },
            '1073': { formatif: [85, 80, 90, 80], sumatif: [94] },
            '1083': { formatif: [95, 90, 100, 90], sumatif: [98] },
            '1103': { formatif: [100, 95, 100, 90], sumatif: [100] },
            '1072': { formatif: [95, 95, 100, 95], sumatif: [100] },
            '1114': { formatif: [90, 85, 90, 80], sumatif: [96] },
            '1094': { formatif: [85, 80, 85, 75], sumatif: [94] },
            '1089': { formatif: [100, 95, 100, 95], sumatif: [100] },
            '1080': { formatif: [90, 85, 90, 85], sumatif: [96] },
            '1111': { formatif: [100, 95, 100, 90], sumatif: [100] },
            '1101': { formatif: [90, 85, 90, 85], sumatif: [96] },
            '1082': { formatif: [95, 90, 100, 95], sumatif: [98] },
            '1078': { formatif: [85, 80, 90, 75], sumatif: [93] },
            '1123': { formatif: [90, 85, 90, 80], sumatif: [96] },
            '1062': { formatif: [100, 95, 100, 90], sumatif: [98] },
            '1106': { formatif: [100, 90, 100, 100], sumatif: [100] },
            '1087': { formatif: [100, 95, 100, 95], sumatif: [100] },
            '1084': { formatif: [100, 90, 100, 90], sumatif: [98] },
            '1092': { formatif: [95, 85, 90, 85], sumatif: [98] },
            '1124': { formatif: [80, 80, 100, 75], sumatif: [93] },
            '1104': { formatif: [80, 95, 90, 75], sumatif: [88] },
            '1125': { formatif: [100, 100, 100, 100], sumatif: [100] },
            '1074': { formatif: [90, 85, 100, 85], sumatif: [96] },
            '1064': { formatif: [95, 90, 90, 85], sumatif: [98] },
            '1130': { formatif: [95, 90, 90, 85], sumatif: [96] },
            '1060': { formatif: [100, 100, 100, 100], sumatif: [96] }
        };

        const topics = [
            'Membaca dan Menulis Bilangan',
            'Nilai Angka dan Nilai Tempat Bilangan',
            'Komposisi dan Dekomposisi Bilangan',
            'Membandingkan dan Mengurutkan Bilangan'
        ];

        // --- Elemen DOM ---
        const nisnInput = document.getElementById('nisnInput');
        const nameDisplay = document.getElementById('nameDisplay');
        const lihatNilaiBtn = document.getElementById('lihatNilaiBtn');
        const searchForm = document.getElementById('search-form');
        const gradesView = document.getElementById('grades-view');
        const studentNameCode = document.getElementById('studentNameCode');
        const gradeTableContainer = document.getElementById('gradeTableContainer');
        const backBtn = document.getElementById('backBtn');
        const homeBtn = document.getElementById('homeBtn');
        const customAlert = document.getElementById('customAlert');

        // --- Fungsi Utama ---
        function searchStudent() {
            const nisn = nisnInput.value.trim();
            if (nisn === '') {
                showCustomAlert('NISN tidak boleh kosong.');
                return;
            }

            const student = students.find(s => s.nis === nisn);
            if (student) {
                // Menampilkan nama siswa di form pencarian
                nameDisplay.value = student.name;

                // Mengganti teks tombol dan menonaktifkan untuk mencegah pencarian duplikat
                lihatNilaiBtn.textContent = 'Mencari...';
                lihatNilaiBtn.disabled = true;

                // Menunggu sebentar sebelum beralih tampilan
                setTimeout(() => {
                    displayGrades(student.nis, student.name);
                    lihatNilaiBtn.textContent = 'Lihat Nilai';
                    lihatNilaiBtn.disabled = false;
                }, 500);

            } else {
                showCustomAlert('Data siswa tidak ditemukan.');
                nameDisplay.value = '';
            }
        }

        function displayGrades(nis, name) {
            const studentGrades = grades[nis];
            if (studentGrades) {
                // Menampilkan nama siswa di halaman nilai
                studentNameCode.textContent = `${name} (${nis})`;
                
                // Menyembunyikan form pencarian dan menampilkan tampilan nilai
                searchForm.classList.add('hidden');
                gradesView.classList.remove('hidden');

                generateGradeTable(studentGrades);
            } else {
                showCustomAlert('Tidak ada nilai untuk siswa ini.');
                // Kembali ke tampilan pencarian jika data tidak ditemukan
                resetToSearch();
            }
        }

        function generateGradeTable(studentGrades) {
            const formatifValues = studentGrades.formatif;
            const sumatifValue = studentGrades.sumatif[0];
            const hasFormatif = formatifValues && formatifValues.length > 0;

            let tableHTML = `
                <table class="grade-table">
                    <thead>
                        <tr>
                            <th colspan="${hasFormatif ? formatifValues.length : 1}">Formatif</th>
                            <th>Sumatif</th>
                        </tr>
                        <tr class="description-row">
                            ${topics.map(topic => `<td>${topic}</td>`).join('')}
                            <td>Bilangan Cacah 1</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            ${formatifValues.map(grade => `<td>${grade}</td>`).join('')}
                            <td>${sumatifValue}</td>
                        </tr>
                    </tbody>
                </table>
            `;

            if (!hasFormatif) {
                gradeTableContainer.innerHTML = '<p class="text-gray-500 mt-4">Tidak ada nilai untuk siswa ini.</p>';
            } else {
                gradeTableContainer.innerHTML = tableHTML;
            }
        }

        function showCustomAlert(message) {
            customAlert.textContent = message;
            customAlert.classList.remove('hidden', 'opacity-0');
            customAlert.classList.add('opacity-100');
            setTimeout(() => {
                customAlert.classList.remove('opacity-100');
                customAlert.classList.add('opacity-0');
                setTimeout(() => {
                    customAlert.classList.add('hidden');
                }, 300);
            }, 3000);
        }
        
        function resetToSearch() {
            searchForm.classList.remove('hidden');
            gradesView.classList.add('hidden');
            nisnInput.value = '';
            nameDisplay.value = '';
        }

        // --- Event Listeners ---
        lihatNilaiBtn.addEventListener('click', searchStudent);
        nisnInput.addEventListener('input', () => {
            nameDisplay.value = '';
            lihatNilaiBtn.textContent = 'Lihat Nilai';
            lihatNilaiBtn.disabled = false;
        });
        nisnInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchStudent();
            }
        });
        backBtn.addEventListener('click', resetToSearch);
        homeBtn.addEventListener('click', resetToSearch);
    </script>

</body>
</html>
