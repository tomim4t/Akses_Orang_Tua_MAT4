<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Asesmen Siswa Sederhana</title>
    <!-- Memuat Tailwind CSS untuk styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e0f2fe; /* Latar belakang biru muda */
        }
        .container-card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        input[type="text"] {
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            padding: 0.75rem;
            text-align: center;
            transition: all 0.2s;
            font-size: 1.125rem;
            font-weight: 600;
        }
        input[type="text"]:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
        }
        .custom-alert {
            z-index: 100;
        }
        /* Style for the button */
        .lihat-nilai-btn {
            background-color: #22c55e; /* green-500 */
            color: white;
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.2s;
            cursor: pointer;
        }
        .lihat-nilai-btn:hover {
            background-color: #16a34a; /* green-600 */
        }
        .lihat-nilai-btn:disabled {
            background-color: #9ca3af; /* gray-400 */
            cursor: not-allowed;
        }
        
        /* Style for the table */
        .grade-table-container {
            overflow-x: auto;
        }
        .grade-table {
            width: 100%;
            border-collapse: collapse;
        }
        .grade-table th, .grade-table td {
            border: 1px solid #e5e7eb;
            padding: 0.5rem;
            text-align: center;
        }
        .grade-table th {
            background-color: #f3f4f6;
            font-weight: bold;
            font-size: 0.75rem;
            text-transform: uppercase;
        }
        .grade-table td {
            font-size: 0.875rem;
        }
        .grade-table .description-row td {
            font-size: 0.7rem;
            line-height: 1rem;
            vertical-align: top;
        }
    </style>
</head>
<body class="p-4 md:p-8 flex items-center justify-center min-h-screen">

    <!-- Konten Utama Aplikasi -->
    <div class="container-card w-full max-w-2xl p-6 md:p-8 text-center transition-all duration-300">
        <!-- Form Pencarian -->
        <div id="search-form">
            <h1 class="text-2xl font-bold text-gray-800 mb-6">Akses Nilai Siswa</h1>
            <input type="text" id="nisnInput" placeholder="NISN" class="block w-full mb-4">
            <input type="text" id="nameDisplay" placeholder="Nama Siswa" class="block w-full mb-6 bg-gray-100 cursor-default" readonly>
            <button id="lihatNilaiBtn" class="lihat-nilai-btn w-full">
                Lihat Nilai
            </button>
        </div>
        
        <!-- Tampilan Nilai Siswa (Awalnya Tersembunyi) -->
        <div id="grades-view" class="hidden mt-6">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-xl md:text-2xl font-bold text-gray-800 flex-grow text-left">Hasil Asesmen Siswa</h1>
                <button id="homeBtn" class="bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-600 transition-colors duration-200">
                    Home
                </button>
            </div>
            <div id="student-info" class="text-left mb-4">
                <span id="studentNameCode" class="font-semibold text-gray-700 text-lg"></span>
            </div>
            
            <div id="gradeTableContainer" class="grade-table-container">
                <!-- Tabel nilai akan dimasukkan di sini oleh JavaScript -->
            </div>
            
            <button id="backBtn" class="bg-gray-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-gray-600 transition-colors duration-200 mt-6 w-full">
                Kembali
            </button>
        </div>
        
        <!-- Modal Pemberitahuan Kustom -->
        <div id="customAlert" class="custom-alert fixed bottom-4 right-4 bg-gray-800 text-white py-3 px-6 rounded-lg shadow-lg opacity-0 transition-opacity duration-300 hidden">
            <span>Pesan</span>
        </div>
    </div>

    <script>
        // --- Data Model: Data Siswa dan Nilai ---
        // Data ini telah diperbarui dari file CSV lengkap yang Anda berikan.
        const students = [
            { nis: '1120', name: 'ABDUL QODIR MUHAMMAD' },
            { nis: '1100', name: 'AFRINA MALIKA QUINN' },
            { nis: '1126', name: 'AIDAN RASHAAD SAQEEL WIRAWAN' },
            { nis: '1069', name: 'AISYAH AYUDIA INARA PUTRI' },
            { nis: '1128', name: 'AKIRA AZKA YUSUF' },
            { nis: '1085', name: 'ALANNAH NAOMI SAHILA' },
            { nis: '1127', name: 'ALBIAN ARSYAD WIBOWO' },
            { nis: '1097', name: 'ALISYA FARA DEBYA' },
            { nis: '1105', name: 'ANASTASYA ZULFA PUTRI ANINGTYAS' },
            { nis: '1067', name: 'ANNAQIYAH ASKARU DZAHABIAH' },
            { nis: '1093', name: 'ARETA SHAKIRA' },
            { nis: '1099', name: 'AZKIA SABRINA AZHAR' },
            { nis: '1063', name: 'BENEDICT ARKA FACHRI' },
            { nis: '1116', name: 'CALISSA AQILLA KAMILA' },
            { nis: '1133', name: 'CANTIKA ANGGITA SALSABILA' },
            { nis: '1095', name: 'FAHRI ALFIAN' },
            { nis: '1070', name: 'FAIZAH AZZAHRA PUTRI' },
            { nis: '1098', name: 'FARAH ADIBA AZ-ZAHRA' },
            { nis: '1065', name: 'FATIMAH AZ-ZAHRA' },
            { nis: '1117', name: 'FATIN NAYLA HURIYA' },
            { nis: '1121', name: 'GHAISAN ALTHAF RIADY' },
            { nis: '1109', name: 'GHAISAN ALTHAF RIADY' },
            { nis: '1112', name: 'HAJAR ASWAD' },
            { nis: '1086', name: 'HANUM MAUDY ALKAFF' },
            { nis: '1108', name: 'IRFAN DZIKRI PRATAMA' },
            { nis: '1076', name: 'KEISHA ALYA WAHYUDI' },
            { nis: '1090', name: 'KHAYRA AZZAHRA' },
            { nis: '1118', name: 'KHAIRUNNISA NAJLA' },
            { nis: '1107', name: 'KHALIFAH JASMINE SHIDQI' },
            { nis: '1113', name: 'KHALIL ANIES PUTRA' },
            { nis: '1096', name: 'KHANZA ADISTI ALMAIRA' },
            { nis: '1075', name: 'KRISNA ARYA PRADIPTA' },
            { nis: '1115', name: 'LAILA NAJWA SAUSAN' },
            { nis: '1079', name: 'MARITZA ZAHIRA ARTHARIAN' },
            { nis: '1088', name: 'MUHAMMAD ALDY ARSYAD' },
            { nis: '1071', name: 'MUHAMMAD ALFARIZI' },
            { nis: '1122', name: 'MUHAMMAD ALTHAF AZZAHWAN' },
            { nis: '1077', name: 'MUHAMMAD ARKAN' },
            { nis: '1102', name: 'MUHAMMAD AZKA' },
            { nis: '1119', name: 'MUHAMMAD FAIZ ZAKARIA' },
            { nis: '1110', name: 'MUHAMMAD FATHIR FAHRIZAL' },
            { nis: '1066', name: 'MUHAMMAD FAHREZI PUTRA PAMUNGKAS' },
            { nis: '1081', name: 'MUHAMMAD FIKRI SYAH PUTRA' },
            { nis: '1068', name: 'MUHAMMAD HAFIDZ AFIFI' },
            { nis: '1091', name: 'MUHAMMAD HAMDAN NURSYAHBANI' },
            { nis: '1073', name: 'MUHAMMAD NAUFAL' },
            { nis: '1083', name: 'MUHAMMAD RAFIQI' },
            { nis: '1103', name: 'MUHAMMAD RAFISYAH ALMUBARAK' },
            { nis: '1072', name: 'MUHAMMAD RAFI KHALIS' },
            { nis: '1114', name: 'MUHAMMAD RASYID' },
            { nis: '1094', name: 'MUHAMMAD ZULFIKAR AZKA PRATAMA' },
            { nis: '1089', name: 'NADHIRA E GA PUTRI FARDANA' },
            { nis: '1080', name: 'NAILAH SALSABILA AZZAHRA' },
            { nis: '1111', name: 'NAJWA AURELIA PUTRI' },
            { nis: '1101', name: 'NAYLA HANIYYA' },
            { nis: '1082', name: 'NEZHA AQILLA' },
            { nis: '1078', name: 'NUR MUHAMMAD ALAMSYAH' },
            { nis: '1123', name: 'OKY PRABOWO' },
            { nis: '1062', name: 'RAIHAN GADING SATRIA' },
            { nis: '1106', name: 'MUHAMMAD ZHAFRAN MAULANA' },
            { nis: '1087', name: 'NADHIRA EGA PUTRI FARDANA' },
            { nis: '1084', name: 'NABILA PUTRI ADIYANTO' },
            { nis: '1092', name: 'MUHAMMAD AHZA DANISH FAHREZA' },
            { nis: '1124', name: 'KIRANA HANANIA ZULFARIYANTO' },
            { nis: '1104', name: 'MUHAMMAD AZHAR AFANDI' },
            { nis: '1125', name: 'MUHAMMAD KEEFANO AL-FATIH PRATAMA' },
            { nis: '1074', name: 'MUHAMMAD RIFQI FAHREZI' },
            { nis: '1064', name: 'MUHAMMAD SAIF' },
            { nis: '1129', name: 'NUR MUHAMMAD ALAMSYAH' },
            { nis: '1080', name: 'NAILAH SALSABILA AZZAHRA' },
            { nis: '1111', name: 'NAJWA AURELIA PUTRI' },
            { nis: '1101', name: 'NAYLA HANIYYA' },
            { nis: '1082', name: 'NEZHA AQILLA' },
            { nis: '1078', name: 'NUR MUHAMMAD ALAMSYAH' },
            { nis: '1123', name: 'OKY PRABOWO' },
            { nis: '1062', name: 'RAIHAN GADING SATRIA' },
            { nis: '1106', name: 'MUHAMMAD ZHAFRAN MAULANA' },
            { nis: '1087', name: 'NADHIRA EGA PUTRI FARDANA' },
            { nis: '1084', name: 'NABILA PUTRI ADIYANTO' },
            { nis: '1092', name: 'MUHAMMAD AHZA DANISH FAHREZA' },
            { nis: '1124', name: 'KIRANA HANANIA ZULFARIYANTO' },
            { nis: '1104', name: 'MUHAMMAD AZHAR AFANDI' },
            { nis: '1125', name: 'MUHAMMAD KEEFANO AL-FATIH PRATAMA' },
            { nis: '1074', name: 'MUHAMMAD RIFQI FAHREZI' },
            { nis: '1064', name: 'MUHAMMAD SAIF' },
            { nis: '1130', name: 'SYAKIRA ADISTY' },
            { nis: '1103', name: 'MUHAMMAD RAFISYAH ALMUBARAK' },
            { nis: '1072', name: 'MUHAMMAD RAFI KHALIS' },
            { nis: '1114', name: 'MUHAMMAD RASYID' },
            { nis: '1094', name: 'MUHAMMAD ZULFIKAR AZKA PRATAMA' },
            { nis: '1089', name: 'NADHIRA E GA PUTRI FARDANA' },
            { nis: '1080', name: 'NAILAH SALSABILA AZZAHRA' },
            { nis: '1111', name: 'NAJWA AURELIA PUTRI' },
            { nis: '1101', name: 'NAYLA HANIYYA' },
            { nis: '1082', name: 'NEZHA AQILLA' },
            { nis: '1078', name: 'NUR MUHAMMAD ALAMSYAH' },
            { nis: '1123', name: 'OKY PRABOWO' },
            { nis: '1062', name: 'RAIHAN GADING SATRIA' },
            { nis: '1106', name: 'MUHAMMAD ZHAFRAN MAULANA' },
            { nis: '1087', name: 'NADHIRA EGA PUTRI FARDANA' },
            { nis: '1084', name: 'NABILA PUTRI ADIYANTO' },
            { nis: '1092', name: 'MUHAMMAD AHZA DANISH FAHREZA' },
            { nis: '1124', name: 'KIRANA HANANIA ZULFARIYANTO' },
            { nis: '1104', name: 'MUHAMMAD AZHAR AFANDI' },
            { nis: '1125', name: 'MUHAMMAD KEEFANO AL-FATIH PRATAMA' },
            { nis: '1074', name: 'MUHAMMAD RIFQI FAHREZI' },
            { nis: '1064', name: 'MUHAMMAD SAIF' },
            { nis: '1130', name: 'SYAKIRA ADISTY' },
            { nis: '1103', name: 'MUHAMMAD RAFISYAH ALMUBARAK' },
            { nis: '1072', name: 'MUHAMMAD RAFI KHALIS' },
            { nis: '1114', name: 'MUHAMMAD RASYID' },
            { nis: '1094', name: 'MUHAMMAD ZULFIKAR AZKA PRATAMA' },
            { nis: '1089', name: 'NADHIRA E GA PUTRI FARDANA' },
            { nis: '1080', name: 'NAILAH SALSABILA AZZAHRA' },
            { nis: '1111', name: 'NAJWA AURELIA PUTRI' },
            { nis: '1101', name: 'NAYLA HANIYYA' },
            { nis: '1082', name: 'NEZHA AQILLA' },
            { nis: '1078', name: 'NUR MUHAMMAD ALAMSYAH' },
            { nis: '1123', name: 'OKY PRABOWO' },
            { nis: '1062', name: 'RAIHAN GADING SATRIA' },
            { nis: '1106', name: 'MUHAMMAD ZHAFRAN MAULANA' },
            { nis: '1087', name: 'NADHIRA EGA PUTRI FARDANA' },
            { nis: '1084', name: 'NABILA PUTRI ADIYANTO' },
            { nis: '1092', name: 'MUHAMMAD AHZA DANISH FAHREZA' },
            { nis: '1124', name: 'KIRANA HANANIA ZULFARIYANTO' },
            { nis: '1104', name: 'MUHAMMAD AZHAR AFANDI' },
            { nis: '1125', name: 'MUHAMMAD KEEFANO AL-FATIH PRATAMA' },
            { nis: '1074', name: 'MUHAMMAD RIFQI FAHREZI' },
            { nis: '1064', name: 'MUHAMMAD SAIF' },
            { nis: '1130', name: 'SYAKIRA ADISTY' },
            { nis: '1129', name: 'MUHAMMAD NAJIB AZKADINA' },
            { nis: '1109', name: 'MUHAMMAD FARHAN AZZAHID' },
            { nis: '1112', name: 'HAJAR ASWAD' },
            { nis: '1086', name: 'HANUM MAUDY ALKAFF' },
            { nis: '1108', name: 'IRFAN DZIKRI PRATAMA' },
            { nis: '1076', name: 'KEISHA ALYA WAHYUDI' },
            { nis: '1090', name: 'KHAYRA AZZAHRA' },
            { nis: '1118', name: 'KHAIRUNNISA NAJLA' },
            { nis: '1107', name: 'KHALIFAH JASMINE SHIDQI' },
            { nis: '1113', name: 'KHALIL ANIES PUTRA' },
            { nis: '1096', name: 'KHANZA ADISTI ALMAIRA' },
            { nis: '1075', name: 'KRISNA ARYA PRADIPTA' },
            { nis: '1115', name: 'LAILA NAJWA SAUSAN' },
            { nis: '1079', name: 'MARITZA ZAHIRA ARTHARIAN' },
            { nis: '1088', name: 'MUHAMMAD ALDY ARSYAD' },
            { nis: '1071', name: 'MUHAMMAD ALFARIZI' },
            { nis: '1122', name: 'MUHAMMAD ALTHAF AZZAHWAN' },
            { nis: '1077', name: 'MUHAMMAD ARKAN' },
            { nis: '1102', name: 'MUHAMMAD AZKA' },
            { nis: '1119', name: 'MUHAMMAD FAIZ ZAKARIA' },
            { nis: '1110', name: 'MUHAMMAD FATHIR FAHRIZAL' },
            { nis: '1066', name: 'MUHAMMAD FAHREZI PUTRA PAMUNGKAS' },
            { nis: '1081', name: 'MUHAMMAD FIKRI SYAH PUTRA' },
            { nis: '1068', name: 'MUHAMMAD HAFIDZ AFIFI' },
            { nis: '1091', name: 'MUHAMMAD HAMDAN NURSYAHBANI' },
            { nis: '1073', name: 'MUHAMMAD NAUFAL' },
            { nis: '1083', name: 'MUHAMMAD RAFIQI' },
            { nis: '1103', name: 'MUHAMMAD RAFISYAH ALMUBARAK' },
            { nis: '1072', name: 'MUHAMMAD RAFI KHALIS' },
            { nis: '1114', name: 'MUHAMMAD RASYID' },
            { nis: '1094', name: 'MUHAMMAD ZULFIKAR AZKA PRATAMA' },
            { nis: '1089', name: 'NADHIRA E GA PUTRI FARDANA' },
            { nis: '1080', name: 'NAILAH SALSABILA AZZAHRA' },
            { nis: '1111', name: 'NAJWA AURELIA PUTRI' },
            { nis: '1101', name: 'NAYLA HANIYYA' },
            { nis: '1082', name: 'NEZHA AQILLA' },
            { nis: '1078', name: 'NUR MUHAMMAD ALAMSYAH' },
            { nis: '1123', name: 'OKY PRABOWO' },
            { nis: '1062', name: 'RAIHAN GADING SATRIA' },
            { nis: '1106', name: 'MUHAMMAD ZHAFRAN MAULANA' },
            { nis: '1087', name: 'NADHIRA EGA PUTRI FARDANA' },
            { nis: '1084', name: 'NABILA PUTRI ADIYANTO' },
            { nis: '1092', name: 'MUHAMMAD AHZA DANISH FAHREZA' },
            { nis: '1124', name: 'KIRANA HANANIA ZULFARIYANTO' },
            { nis: '1104', name: 'MUHAMMAD AZHAR AFANDI' },
            { nis: '1125', name: 'MUHAMMAD KEEFANO AL-FATIH PRATAMA' },
            { nis: '1074', name: 'MUHAMMAD RIFQI FAHREZI' },
            { nis: '1064', name: 'MUHAMMAD SAIF' },
            { nis: '1130', name: 'SYAKIRA ADISTY' },
            { nis: '1060', name: 'KIANDRA ZEVANNA ARSY' },
            { nis: '1129', name: 'MUHAMMAD NAJIB AZKADINA' }
        ];

        const formatifGrades = {
            '1120': [95, 100, 100, 100],
            '1100': [100, 75, 100, 75],
            '1126': [100, 95, 100, 100],
            '1069': [90, 80, 85, 80],
            '1128': [95, 100, 90, 80],
            '1085': [90, 95, 90, 80],
            '1127': [80, 85, 90, 75],
            '1097': [100, 90, 100, 95],
            '1105': [80, 85, 95, 90],
            '1067': [100, 100, 100, 95],
            '1093': [90, 90, 85, 85],
            '1099': [85, 80, 85, 75],
            '1063': [95, 95, 90, 85],
            '1116': [100, 95, 100, 95],
            '1133': [95, 80, 90, 80],
            '1095': [85, 80, 90, 80],
            '1070': [90, 85, 100, 85],
            '1098': [95, 90, 100, 90],
            '1065': [95, 80, 90, 80],
            '1117': [100, 90, 95, 85],
            '1121': [90, 85, 90, 80],
            '1109': [85, 80, 85, 80],
            '1112': [90, 95, 100, 90],
            '1086': [95, 90, 95, 80],
            '1108': [90, 95, 90, 85],
            '1076': [95, 90, 95, 80],
            '1090': [100, 95, 100, 100],
            '1118': [90, 95, 90, 85],
            '1107': [100, 100, 100, 100],
            '1113': [90, 85, 95, 80],
            '1096': [95, 90, 100, 90],
            '1075': [85, 80, 85, 80],
            '1115': [95, 95, 100, 95],
            '1079': [100, 90, 100, 90],
            '1088': [90, 85, 90, 85],
            '1071': [95, 90, 90, 85],
            '1122': [100, 95, 100, 95],
            '1077': [95, 90, 95, 85],
            '1102': [100, 90, 100, 90],
            '1119': [95, 95, 100, 90],
            '1110': [90, 85, 90, 85],
            '1066': [85, 80, 95, 85],
            '1081': [90, 95, 90, 80],
            '1068': [95, 80, 90, 80],
            '1091': [100, 90, 100, 100],
            '1073': [85, 80, 90, 80],
            '1083': [95, 90, 100, 90],
            '1103': [100, 95, 100, 90],
            '1072': [95, 95, 100, 95],
            '1114': [90, 85, 90, 80],
            '1094': [85, 80, 85, 75],
            '1089': [100, 95, 100, 95],
            '1080': [90, 85, 90, 85],
            '1111': [100, 95, 100, 90],
            '1101': [90, 85, 90, 85],
            '1082': [95, 90, 100, 95],
            '1078': [85, 80, 90, 75],
            '1123': [90, 85, 90, 80],
            '1062': [100, 95, 100, 90],
            '1106': [100, 90, 100, 100],
            '1087': [100, 95, 100, 95],
            '1084': [100, 90, 100, 95],
            '1092': [95, 85, 90, 85],
            '1124': [80, 80, 100, 75],
            '1104': [80, 95, 90, 75],
            '1125': [100, 100, 100, 100],
            '1074': [90, 85, 100, 85],
            '1064': [85, 80, 85, 75],
            '1129': [100, 95, 100, 90],
            '1109': [95, 95, 90, 85],
            '1112': [90, 95, 100, 90],
            '1086': [95, 90, 95, 80],
            '1108': [90, 95, 90, 85],
            '1076': [95, 90, 95, 80],
            '1090': [100, 95, 100, 100],
            '1118': [90, 95, 90, 85],
            '1107': [100, 100, 100, 100],
            '1113': [90, 85, 95, 80],
            '1096': [95, 90, 100, 90],
            '1075': [85, 80, 85, 80],
            '1115': [95, 95, 100, 95],
            '1079': [100, 90, 100, 90],
            '1088': [90, 85, 90, 85],
            '1071': [95, 90, 90, 85],
            '1122': [100, 95, 100, 95],
            '1077': [95, 90, 95, 85],
            '1102': [100, 90, 100, 90],
            '1119': [95, 95, 100, 90],
            '1110': [90, 85, 90, 85],
            '1066': [85, 80, 95, 85],
            '1081': [90, 95, 90, 80],
            '1068': [95, 80, 90, 80],
            '1091': [100, 90, 100, 100],
            '1073': [85, 80, 90, 80],
            '1083': [95, 90, 100, 90],
            '1103': [100, 95, 100, 90],
            '1072': [95, 95, 100, 95],
            '1114': [90, 85, 90, 80],
            '1094': [85, 80, 85, 75],
            '1089': [100, 95, 100, 95],
            '1080': [90, 85, 90, 85],
            '1111': [100, 95, 100, 90],
            '1101': [90, 85, 90, 85],
            '1082': [95, 90, 100, 95],
            '1078': [85, 80, 90, 75],
            '1123': [90, 85, 90, 80],
            '1062': [100, 95, 100, 90],
            '1106': [100, 90, 100, 100],
            '1087': [100, 95, 100, 95],
            '1084': [100, 90, 100, 95],
            '1092': [95, 85, 90, 85],
            '1124': [80, 80, 100, 75],
            '1104': [80, 95, 90, 75],
            '1125': [100, 100, 100, 100],
            '1074': [90, 85, 100, 85],
            '1064': [85, 80, 85, 75],
            '1130': [90, 80, 90, 80],
            '1060': [100, 100, 100, 100],
            '1129': [100, 95, 100, 90]
        };

        const sumatifGrades = {
            '1120': [100],
            '1100': [98],
            '1126': [100],
            '1069': [95],
            '1128': [95.5],
            '1085': [90],
            '1127': [88],
            '1097': [97.5],
            '1105': [92.5],
            '1067': [95],
            '1093': [90.5],
            '1099': [81.5],
            '1063': [98],
            '1116': [100],
            '1133': [90.5],
            '1095': [90.5],
            '1070': [95.5],
            '1098': [98.5],
            '1065': [90.5],
            '1117': [97.5],
            '1121': [92.5],
            '1109': [90.5],
            '1112': [97.5],
            '1086': [95.5],
            '1108': [95],
            '1076': [95.5],
            '1090': [100],
            '1118': [95],
            '1107': [100],
            '1113': [92.5],
            '1096': [97.5],
            '1075': [90.5],
            '1115': [100],
            '1079': [98],
            '1088': [92.5],
            '1071': [95],
            '1122': [100],
            '1077': [95.5],
            '1102': [98],
            '1119': [98.5],
            '1110': [92.5],
            '1066': [90.5],
            '1081': [92.5],
            '1068': [90.5],
            '1091': [100],
            '1073': [90.5],
            '1083': [98.5],
            '1103': [97.5],
            '1072': [100],
            '1114': [90.5],
            '1094': [81],
            '1089': [100],
            '1080': [92.5],
            '1111': [98],
            '1101': [92.5],
            '1082': [98.5],
            '1078': [88],
            '1123': [92.5],
            '1062': [98.5],
            '1106': [0],
            '1087': [95],
            '1084': [95],
            '1092': [98],
            '1124': [92.5],
            '1104': [88],
            '1125': [100],
            '1074': [95.5],
            '1064': [81],
            '1129': [98.5],
            '1109': [90.5],
            '1112': [97.5],
            '1086': [95.5],
            '1108': [95],
            '1076': [95.5],
            '1090': [100],
            '1118': [95],
            '1107': [100],
            '1113': [92.5],
            '1096': [97.5],
            '1075': [90.5],
            '1115': [100],
            '1079': [98],
            '1088': [92.5],
            '1071': [95],
            '1122': [100],
            '1077': [95.5],
            '1102': [98],
            '1119': [98.5],
            '1110': [92.5],
            '1066': [90.5],
            '1081': [92.5],
            '1068': [90.5],
            '1091': [100],
            '1073': [90.5],
            '1083': [98.5],
            '1103': [97.5],
            '1072': [100],
            '1114': [90.5],
            '1094': [81],
            '1089': [100],
            '1080': [92.5],
            '1111': [98],
            '1101': [92.5],
            '1082': [98.5],
            '1078': [88],
            '1123': [92.5],
            '1062': [98.5],
            '1106': [0],
            '1087': [95],
            '1084': [95],
            '1092': [98],
            '1124': [92.5],
            '1104': [88],
            '1125': [100],
            '1074': [95.5],
            '1064': [81],
            '1130': [90.5],
            '1060': [95.5]
        };
        
        // Data keterangan untuk setiap asesmen
        const formatifDescriptions = [
            "Membaca dan Menulis Bilangan",
            "Nilai Angka dan Nilai Tempat Bilangan",
            "Komposisi dan Dekomposisi Bilangan",
            "Membandingkan dan Mengurutkan Bilangan"
        ];

        const sumatifDescriptions = [
            "BILANGAN CACAH 1"
        ];

        // --- Elemen DOM ---
        const nisnInput = document.getElementById('nisnInput');
        const nameDisplay = document.getElementById('nameDisplay');
        const lihatNilaiBtn = document.getElementById('lihatNilaiBtn');
        const searchForm = document.getElementById('search-form');
        const gradesView = document.getElementById('grades-view');
        const backBtn = document.getElementById('backBtn');
        const homeBtn = document.getElementById('homeBtn');
        const customAlert = document.getElementById('customAlert');
        const studentNameCode = document.getElementById('studentNameCode');
        const gradeTableContainer = document.getElementById('gradeTableContainer');

        // --- Fungsi-fungsi Utama ---

        function searchStudent() {
            const nisn = nisnInput.value.trim();
            if (!nisn) {
                showCustomAlert('Silakan masukkan NISN.');
                return;
            }

            const student = students.find(s => s.nis === nisn);
            if (student) {
                nameDisplay.value = student.name;
                lihatNilaiBtn.textContent = 'Lihat Nilai';
                lihatNilaiBtn.disabled = false;
                renderGrades(student.nis, student.name);
                searchForm.classList.add('hidden');
                gradesView.classList.remove('hidden');
            } else {
                nameDisplay.value = 'Siswa tidak ditemukan';
                showCustomAlert(`Siswa dengan NISN ${nisn} tidak ditemukan.`);
                lihatNilaiBtn.disabled = true;
            }
        }
        
        function renderGrades(nis, name) {
            studentNameCode.textContent = `Nama: ${name} | Kode: ${nis}`;
            
            const formatifArray = formatifGrades[nis] || [];
            const sumatifArray = sumatifGrades[nis] || [];
            
            let tableHTML = `<table class="grade-table">`;
            
            // Header
            tableHTML += `<thead><tr>`;
            tableHTML += `<th rowspan="2">Jenis Nilai</th>`;
            if (formatifArray.length > 0) {
                 tableHTML += `<th colspan="${formatifArray.length}">Formatif</th>`;
            }
            if (sumatifArray.length > 0) {
                 tableHTML += `<th colspan="${sumatifArray.length}">Sumatif</th>`;
            }
            tableHTML += `</tr><tr>`;
            formatifArray.forEach((_, i) => tableHTML += `<th>F${i + 1}</th>`);
            sumatifArray.forEach((_, i) => tableHTML += `<th>S${i + 1}</th>`);
            tableHTML += `</tr></thead>`;
            
            // Body - Keterangan
            tableHTML += `<tbody><tr class="description-row">`;
            tableHTML += `<td>Keterangan:</td>`;
            formatifDescriptions.slice(0, formatifArray.length).forEach(desc => tableHTML += `<td>${desc}</td>`);
            sumatifDescriptions.slice(0, sumatifArray.length).forEach(desc => tableHTML += `<td>${desc}</td>`);
            tableHTML += `</tr>`;
            
            // Body - Nilai
            tableHTML += `<tr>`;
            tableHTML += `<td>Nilai</td>`;
            formatifArray.forEach(grade => tableHTML += `<td>${grade}</td>`);
            sumatifArray.forEach(grade => tableHTML += `<td>${grade}</td>`);
            tableHTML += `</tr></tbody>`;
            
            tableHTML += `</table>`;
            
            if (formatifArray.length === 0 && sumatifArray.length === 0) {
                 gradeTableContainer.innerHTML = '<p class="text-center text-gray-500 italic">Belum ada data nilai untuk siswa ini.</p>';
            } else {
                gradeTableContainer.innerHTML = tableHTML;
            }
        }

        function showCustomAlert(message) {
            customAlert.textContent = message;
            customAlert.classList.remove('hidden', 'opacity-0');
            customAlert.classList.add('opacity-100');
            setTimeout(() => {
                customAlert.classList.remove('opacity-100');
                customAlert.classList.add('opacity-0');
                setTimeout(() => {
                    customAlert.classList.add('hidden');
                }, 300);
            }, 3000);
        }
        
        function resetToSearch() {
            searchForm.classList.remove('hidden');
            gradesView.classList.add('hidden');
            nisnInput.value = '';
            nameDisplay.value = '';
        }

        // --- Event Listeners ---
        lihatNilaiBtn.addEventListener('click', searchStudent);
        nisnInput.addEventListener('input', () => {
            nameDisplay.value = '';
            lihatNilaiBtn.textContent = 'Lihat Nilai';
            lihatNilaiBtn.disabled = false;
        });
        nisnInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchStudent();
            }
        });
        backBtn.addEventListener('click', resetToSearch);
        homeBtn.addEventListener('click', resetToSearch);
    </script>
</body>
</html>
